
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Counting Functions &#8212; Doing Things in Dyalog APL</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=bfa96906" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'combinatorics/counting-functions';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Inclusion-Exclusion and Counting Partitions" href="inclusion-exclusion.html" />
    <link rel="prev" title="Combinations and Bijective Proofs" href="combinations-and-bijective-proofs.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Doing Things in Dyalog APL - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Doing Things in Dyalog APL - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Doing Things in Dyalog APL
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Trees</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../trees/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trees/representing-trees.html">Representing Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trees/parent-vectors.html">Parent Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trees/relating-depth-and-parent-vectors.html">Relating the Depth and Parent Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trees/forests.html">Forests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trees/deleting-nodes.html">Deleting Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trees/bottom-up-aggregation.html">Bottom-Up Accumulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trees/working-with-json.html">Working with <code class="docutils literal notranslate"><span class="pre">⎕JSON</span></code></a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Combinatorics</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="enumerative.html">Enumerative Combinatorics</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="combinations-and-bijective-proofs.html">Combinations and Bijective Proofs</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Counting Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="inclusion-exclusion.html">Inclusion-Exclusion and Counting Partitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="stars-bars.html">Stars and Bars</a></li>
<li class="toctree-l2"><a class="reference internal" href="integer-partitions.html">Integer Partitions</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="twelvefold.html">The Twelvefold Way</a></li>
<li class="toctree-l1"><a class="reference internal" href="catalan.html">The Catalan Numbers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Graphs</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../graphs/graphs.html">Graphs</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fcombinatorics/counting-functions.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/combinatorics/counting-functions.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Counting Functions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#balls-and-boxes">Balls and Boxes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Counting Functions</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="counting-functions">
<h1>Counting Functions<a class="headerlink" href="#counting-functions" title="Link to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section assumes you’re familiar with the notions of injective, surjective, and bijective functions.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">1</span>
</pre></div>
</div>
</div>
</div>
<section id="balls-and-boxes">
<h2>Balls and Boxes<a class="headerlink" href="#balls-and-boxes" title="Link to this heading">#</a></h2>
<p>So far we’ve looked at two different counting problems: counting <span class="math notranslate nohighlight">\(k\)</span>-permutations and counting <span class="math notranslate nohighlight">\(k\)</span>-combinations. It turns out there’s a way of looking at these problems which shows an interesting way they are related, and lights the way towards understanding the problems we’re going to see over the rest of this chapter.</p>
<p>In the previous section, we saw how we can represent a combination as a binary string:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;🍎🍌🍊🍐🍇&#39;</span><span class="o">∊</span><span class="s1">&#39;🍎🍊🍐&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre class="language-APL">1 0 1 1 0
</pre></div></div>
</div>
<p>Suppose each character of this string corresponds to a box. Wherever a <code class="docutils literal notranslate"><span class="pre">0</span></code> appears, we leave the box empty. Wherever a <code class="docutils literal notranslate"><span class="pre">1</span></code> appears, we place a ball in the box. Each box represents an element of the original set, and placing a ball in the box represents selecting that element to be included in a combination.</p>
<p>The most important thing to notice about this analogy is this: the boxes are <em>labelled</em>, while the balls are <em>unlabelled</em>. Exactly which ball a box gets doesn’t matter, since the balls are indistinguishable. However, which box a ball is placed in does matter, since that dictates which element of the set is chosen. In this sense, the boxes are labelled with the elements of the set.</p>
<p><img alt="Unlabelled balls in boxes labelled with ." src="../_images/BallsBoxes1_ManimCE_v0.18.0.png" /></p>
<p>This setup gives us an alternative statement of the combination problem: there are <code class="docutils literal notranslate"><span class="pre">k!n</span></code> ways to place <span class="math notranslate nohighlight">\(k\)</span> unlabelled balls into <span class="math notranslate nohighlight">\(n\)</span> labelled boxes, with at most one ball in each box.</p>
<p>In isolation this is not particularly enlightening, but things get more interesting when we notice that we can tweak the parameters of the problem in three different ways. We can change whether the balls are labelled, whether the boxes are labelled, and how many balls are allowed in each box. This gives way to a whole family of counting problems, and we’ll be categorising them all in the next chapter. For now, let’s see how changing just one part of the problem effects things.</p>
<p>Let’s say that, instead of being indistinguishable, we’re going to label our <span class="math notranslate nohighlight">\(k\)</span> balls with <code class="docutils literal notranslate"><span class="pre">⍳k</span></code>. Now, it does matter exactly which ball goes into which box:</p>
<p><img alt="Balls labelled with  and  in boxes labelled with ." src="../_images/BallsBoxes2_ManimCE_v0.18.0.png" /></p>
<p>With labelled balls, the problem no longer corresponds to counting <span class="math notranslate nohighlight">\(k\)</span>-combinations. Instead, it corresponds to counting <span class="math notranslate nohighlight">\(k\)</span>-<em>permutations</em>. If we take the label of ball as the index in a <span class="math notranslate nohighlight">\(k\)</span>-permutation, placing the balls in the boxes corresponds to choosing which element is placed at each index.</p>
<p><img alt="Labelled balls into labelled boxes and resulting partial permutation." src="../_images/BallsBoxes3_ManimCE_v0.18.0.png" /></p>
<p>In later sections, we’re going to look at the other specific counting problems we can make by varying the labelling of both the balls and boxes. We’re also going to look at how controlling the number of balls which can go into each box affects the problems we make, which is going to require being more formal with our analogy.</p>
</section>
<section id="id1">
<h2>Counting Functions<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>Consider again the balls and boxes example we’ve just seen. It involves assigning a box to each ball we have. In other words, each placement of balls is equivalent to a monadic function which takes a ball as input, and returns the box it is placed in as output. We’ve been working with our fruit example until now, but to show how our problems can work for any set, we’re going to start using generic sets of inputs and outputs. This is not quite as fun but it helps to forget about the details of examples and just think about the counting itself. Specifically, we’ll just use <code class="docutils literal notranslate"><span class="pre">⍳k</span></code> as our <span class="math notranslate nohighlight">\(k\)</span> element input set (our ‘balls’), and <code class="docutils literal notranslate"><span class="pre">⍳n</span></code> as our <span class="math notranslate nohighlight">\(n\)</span> element output set (our ‘boxes’) from now on. In traditional mathematical notation, this means we’re working with functions <span class="math notranslate nohighlight">\(f\)</span> with type <span class="math notranslate nohighlight">\(f:[k]\to[n]\)</span>.</p>
<p>For each <span class="math notranslate nohighlight">\(k\)</span> and <span class="math notranslate nohighlight">\(n\)</span>, there are <code class="docutils literal notranslate"><span class="pre">n*k</span></code> possible functions from <code class="docutils literal notranslate"><span class="pre">⍳k</span></code> to <code class="docutils literal notranslate"><span class="pre">⍳n</span></code> (functions with type <span class="math notranslate nohighlight">\([k]\to[n]\)</span>), since there are <span class="math notranslate nohighlight">\(n\)</span> options for each of the <span class="math notranslate nohighlight">\(k\)</span> inputs. However, our counting problems usually have fewer valid assignments than this. For example, in our <span class="math notranslate nohighlight">\(k\)</span>-permutations problem, we only allowed at most one ball to be placed in each box, which means any function that places two or more balls in the same box isn’t counted.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Valid3Permutation</span><span class="kd">←</span><span class="kt">{</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">1</span><span class="bp">:</span><span class="w"> </span><span class="m">4</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">2</span><span class="bp">:</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">3</span><span class="bp">:</span><span class="w"> </span><span class="m">3</span>
<span class="kt">}</span>

<span class="nv">Invalid3Permutation</span><span class="kd">←</span><span class="kt">{</span><span class="w">     </span><span class="c1">⍝ invalid: both 2 and 3 are sent to 1</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">1</span><span class="bp">:</span><span class="w"> </span><span class="m">4</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">2</span><span class="bp">:</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">3</span><span class="bp">:</span><span class="w"> </span><span class="m">1</span>
<span class="kt">}</span>

<span class="o">⊢</span><span class="nv">p</span><span class="kd">←</span><span class="nv">Valid3Permutation</span><span class="na">¨</span><span class="o">⍳</span><span class="m">3</span>
<span class="s1">&#39;🍎🍌🍊🍐🍇&#39;</span><span class="sr">[</span><span class="nv">p</span><span class="sr">]</span>

<span class="o">⊢</span><span class="nv">p</span><span class="kd">←</span><span class="nv">Invalid3Permutation</span><span class="na">¨</span><span class="o">⍳</span><span class="m">3</span>
<span class="s1">&#39;🍎🍌🍊🍐🍇&#39;</span><span class="sr">[</span><span class="nv">p</span><span class="sr">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre class="language-APL">4 1 3
</pre></div><div class="output text_html"><pre class="language-APL">🍐🍎🍊
</pre></div><div class="output text_html"><pre class="language-APL">4 1 1
</pre></div><div class="output text_html"><pre class="language-APL">🍐🍎🍎
</pre></div></div>
</div>
<p>This shows that in our counting problems which require at most one ball in a box, we are really counting <em>injective</em> functions, i.e. functions which which don’t send more than one element of the input to the same output. Note that for a function <span class="math notranslate nohighlight">\([k]\to[n]\)</span> to be injective, we must have <code class="docutils literal notranslate"><span class="pre">k≤n</span></code>, or we would have so many balls that at least one box would need to be given more than one.</p>
<p>We can also think about what counting <em>surjective</em> functions, that is, functions where each element of <code class="docutils literal notranslate"><span class="pre">⍳n</span></code> has at least one element of <code class="docutils literal notranslate"><span class="pre">⍳k</span></code> which is sent to it, means for our counting problems. In the balls and boxes analogy, it means that each box gets <em>at least</em> one ball placed in it, potentially more. Note that here, a function <span class="math notranslate nohighlight">\([k]\to[n]\)</span> must have <code class="docutils literal notranslate"><span class="pre">k≥n</span></code> to have a chance of being surjective, otherwise we wouldn’t have enough balls to put at least one in each box.</p>
<p>The labelling or balls and boxes translates to whether we care about the ordering of elements of <code class="docutils literal notranslate"><span class="pre">⍳k</span></code> and <code class="docutils literal notranslate"><span class="pre">⍳n</span></code> when we count functions. For example, we model combinations and placing unlabelled balls into labelled boxes, so the following functions would be considered the same combination.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Combination1</span><span class="kd">←</span><span class="kt">{</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">1</span><span class="bp">:</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">2</span><span class="bp">:</span><span class="w"> </span><span class="m">3</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">3</span><span class="bp">:</span><span class="w"> </span><span class="m">4</span>
<span class="kt">}</span>

<span class="nv">Combination2</span><span class="kd">←</span><span class="kt">{</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">1</span><span class="bp">:</span><span class="w"> </span><span class="m">4</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">2</span><span class="bp">:</span><span class="w"> </span><span class="m">3</span>
<span class="w">    </span><span class="bp">⍵</span><span class="o">=</span><span class="m">3</span><span class="bp">:</span><span class="w"> </span><span class="m">1</span>
<span class="kt">}</span>
</pre></div>
</div>
</div>
</div>
<p>Importantly, it’s possible to represent functions as vectors. We can represent some function <span class="math notranslate nohighlight">\(F:[k]\to[n]\)</span> as a <span class="math notranslate nohighlight">\(k\)</span>-element vector, whose elements are from <code class="docutils literal notranslate"><span class="pre">⍳n</span></code>. Call this representation <span class="math notranslate nohighlight">\(f\)</span>. We then have <code class="docutils literal notranslate"><span class="pre">F</span> <span class="pre">x</span> <span class="pre">←→</span> <span class="pre">f[x]</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">Combination1</span></code> above can be represented by the vector <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">3</span> <span class="pre">4</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">Combination1</span><span class="na">¨</span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre class="language-APL">3 4
</pre></div><div class="output text_html"><pre class="language-APL">3 4
</pre></div></div>
</div>
<p>For the remainder of this chapter, we’ll be representing functions like this all the time.</p>
<p>In the next section we’re going to look at counting surjections, and see how varying our labelling affects things.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>We can model many counting problems as counting functions from <code class="docutils literal notranslate"><span class="pre">⍳k</span></code> to <code class="docutils literal notranslate"><span class="pre">⍳n</span></code>.</p></li>
<li><p>Each of these functions corresponds to a way of placing <span class="math notranslate nohighlight">\(k\)</span> balls into <span class="math notranslate nohighlight">\(n\)</span> boxes.</p></li>
<li><p>We might not want to distinguish between balls and boxes</p></li>
<li><p>We might want to say at most one, or at least one, ball should be placed in each box.</p></li>
<li><p>The effect of these restrictions is summarised below.</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Balls into Boxes</p></th>
<th class="head"><p>Functions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Balls unlabelled</p></td>
<td><p>Count up to ordering of domain</p></td>
</tr>
<tr class="row-odd"><td><p>Boxes unlabelled</p></td>
<td><p>Count up to ordering of range</p></td>
</tr>
<tr class="row-even"><td><p>At most one ball per box</p></td>
<td><p>Count only injective functions</p></td>
</tr>
<tr class="row-odd"><td><p>At least one ball per box</p></td>
<td><p>Count only surjective functions</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Any function with type <span class="math notranslate nohighlight">\([k]\to[n]\)</span> can be represented as a vector with length <span class="math notranslate nohighlight">\(k\)</span> whose elements are from <code class="docutils literal notranslate"><span class="pre">⍳n</span></code>.</p></li>
</ul>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "dyalog_apl"
        },
        kernelOptions: {
            name: "dyalog_apl",
            path: "./combinatorics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'dyalog_apl'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="combinations-and-bijective-proofs.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Combinations and Bijective Proofs</p>
      </div>
    </a>
    <a class="right-next"
       href="inclusion-exclusion.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Inclusion-Exclusion and Counting Partitions</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#balls-and-boxes">Balls and Boxes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Counting Functions</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Asher Harvey-Smith
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>